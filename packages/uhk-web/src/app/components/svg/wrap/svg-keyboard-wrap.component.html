<ng-template [ngIf]="layers">
    <layers [class.disabled]="popoverShown" (select)="selectLayer($event.index)" [current]="currentLayer"></layers>
    <div class="">
        <h4>
            <label><input type="checkbox" [(ngModel)]="clipboard.isSelectionModeEnabled"> Selection mode
                <span *ngIf="clipboard.countSelected() > 0 || clipboard.countCopied() > 0">(
                    <span *ngIf="clipboard.countSelected() > 0">{{clipboard.countSelected()}} selected</span><span *ngIf="clipboard.countSelected() > 0 && clipboard.countCopied() > 0">, </span>
                    <span *ngIf="clipboard.countCopied() > 0">{{clipboard.countCopied()}} copied</span>
                )</span>
            </label>
            <div>
                <button class="btn btn-default" [disabled]="!clipboard.hasContent()" (click)="clearClipboard()">Clear clipboard</button>
                <button class="btn btn-default" [disabled]="clipboard.countSelected() === 0" (click)="copyToClipboard()">Copy</button>
                <button class="btn btn-default" [disabled]="!clipboard.hasContent()" (click)="paste()">Paste</button>
            </div>
        </h4>
    </div>
    <keyboard-slider [layers]="layers"
                     [currentLayer]="currentLayer"
                     [keybindAnimationEnabled]="keybindAnimationEnabled"
                     [capturingEnabled]="popoverEnabled"
                     [selectedKey]="selectedKey"
                     [halvesSplit]="halvesSplit"
                     [keyboardLayout]="keyboardLayout"
                     (keyClick)="onKeyClick($event.moduleId, $event.keyId, $event.keyTarget)"
                     (keyHover)="onKeyHover($event.moduleId, $event.event, $event.over, $event.keyId)"
                     (capture)="onCapture($event.moduleId, $event.keyId, $event.captured)"
    ></keyboard-slider>
    <popover tabindex="0" [visible]="popoverShown" [keyPosition]="keyPosition" [wrapPosition]="wrapPosition" [defaultKeyAction]="popoverInitKeyAction"
             [currentKeymap]="keymap" [currentLayer]="currentLayer" (cancel)="hidePopover()" (remap)="onRemap($event)"></popover>
    <div class="tooltip bottom"
         [class.in]="tooltipData.show"
         [style.top.px]="tooltipData.posTop"
         [style.left.px]="tooltipData.posLeft"
    >
        <div class="tooltip-arrow"></div>
        <div class="tooltip-inner">
            <p *ngFor="let item of tooltipData.content | async">
                {{ item.name }}: {{ item.value }}
            </p>
        </div>
    </div>
</ng-template>
